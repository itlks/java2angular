<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:jsp="http://java.sun.com/JSP/Page"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:c="http://java.sun.com/jstl/core"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui" 
	template="/templates/templateConsultaNovo.xhtml">

	<ui:define name="content">
        <p:outputPanel styleClass="row">
          <p:outputPanel styleClass="col-md-12">
            <p:outputPanel styleClass="aviso-interno-blocos alert-information box-shadow flex-align-v">                               
                <i class="fa fa-exclamation-circle"></i>
                 <span class="site-map">
                 <p>
                 	#{segundaViaComprovanteConsultarBBean.strAlerta}
                 </p>
                </span>
            </p:outputPanel>  
          </p:outputPanel>                        
        </p:outputPanel>        

        <p:outputPanel styleClass="row">
            <p:outputPanel styleClass="col-lg-12">
                <p:outputPanel styleClass="titulo-painel">
                    <h4>#{msg['page.segundaViaComprovantes.segvia.subTitulo']}</h4>
                </p:outputPanel>
            </p:outputPanel>
        </p:outputPanel>  

		<p:outputPanel styleClass="row" id="painelGeral">
			<p:outputPanel styleClass="col-lg-12">
				<p:outputPanel styleClass="box-shadow">
				
					<p:outputPanel styleClass="row space-b">
                    	<p:outputPanel styleClass="col-md-3">

							<p:outputPanel styleClass="form-group">
								<p:outputLabel for="pagamentoComboBox"
									value="#{msg['page.segundaViaComprovantes.segvia.title.combobox.pagamento']}" />

								<h:selectOneMenu id="pagamentoComboBox"
									value="#{segundaViaComprovanteConsultarBBean.pagamentoSelecionado}">

									<p:ajax
										listener="#{segundaViaComprovanteConsultarBBean.selectPagamento}"
										update="painelGeral" />

									<f:selectItem
										itemLabel="#{msg['page.segundaViaComprovantes.segvia.combobox.selecione']}"
										itemValue="" noSelectionOption="true" />

									<f:selectItems itemLabel="#{pagamento.nome}"
										itemValue="#{pagamento.codigo}"
										value="#{segundaViaComprovanteConsultarBBean.listaPagamento}"
										var="pagamento" />

								</h:selectOneMenu>
							</p:outputPanel>
						</p:outputPanel>

						<p:outputPanel styleClass="col-md-3"
							rendered="#{segundaViaComprovanteConsultarBBean.renderContas}">
							<p:outputPanel styleClass="form-group">
								<p:outputLabel for="contasComboBox"
									value="#{msg['page.segundaViaComprovantes.segvia.title.combobox.contas']}" />

								<h:selectOneMenu id="contasComboBox"
									value="#{segundaViaComprovanteConsultarBBean.contaSelecionada}">

									<f:selectItem
										itemLabel="#{msg['page.segundaViaComprovantes.segvia.combobox.selecione']}"
										itemValue="" noSelectionOption="true" />

									<f:selectItems itemLabel="#{conta.nome}"
										itemValue="#{conta.codigo}"
										value="#{segundaViaComprovanteConsultarBBean.listaContas}"
										var="conta" />
								</h:selectOneMenu>
							</p:outputPanel>
						</p:outputPanel>
						<p:outputPanel styleClass="col-md-3"
							rendered="#{segundaViaComprovanteConsultarBBean.renderFormasPagamento}">
							<p:outputPanel styleClass="form-group">

								<p:outputLabel for="formasPagamentoComboBox"
									value="#{msg['page.segundaViaComprovantes.segvia.title.combobox.forma.de.pagamento']}" />

								<h:selectOneMenu id="formasPagamentoComboBox"
									value="#{segundaViaComprovanteConsultarBBean.formaPagamentoSelecionada}">

									<p:ajax
										listener="#{segundaViaComprovanteConsultarBBean.selectFormaPagamento}"
										update="@(.tabela-cartoes)" />

									<f:selectItem
										itemLabel="#{msg['page.segundaViaComprovantes.segvia.combobox.selecione']}"
										itemValue="" noSelectionOption="true" />

									<f:selectItems itemLabel="#{formaPagamento.nome}"
										itemValue="#{formaPagamento.codigo}"
										value="#{segundaViaComprovanteConsultarBBean.listaFormasPagamento}"
										var="formaPagamento" />
								</h:selectOneMenu>
							</p:outputPanel>
						</p:outputPanel>
						<p:outputPanel styleClass="col-md-3"
							rendered="#{segundaViaComprovanteConsultarBBean.renderCartoes}">
							<p:outputPanel styleClass="form-group">

								<p:outputLabel for="cartoesComboBox"
									value="#{msg['page.segundaViaComprovantes.segvia.title.combobox.cartoes']}" />

								<h:selectOneMenu id="cartoesComboBox"
									value="#{segundaViaComprovanteConsultarBBean.cartaoSelecionado}">

									<p:ajax
										listener="#{segundaViaComprovanteConsultarBBean.selectCartao}"
										update="painelGeral" />

									<f:selectItem
										itemLabel=" #{msg['page.segundaViaComprovantes.segvia.combobox.selecione']}"
										itemValue="" noSelectionOption="true" />

									<f:selectItems
										value="#{segundaViaComprovanteConsultarBBean.listaCartoes}" />
								</h:selectOneMenu>
							</p:outputPanel>
						</p:outputPanel>
						<p:outputPanel styleClass="col-md-3"
							rendered="#{segundaViaComprovanteConsultarBBean.renderTributos}">
							<p:outputPanel styleClass="form-group">

								<p:outputLabel for="tributosComboBox"
									value="#{msg['page.segundaViaComprovantes.segvia.title.combobox.tributos']}" />

								<h:selectOneMenu id="tributosComboBox"
									value="#{segundaViaComprovanteConsultarBBean.tributoSelecionado}">

									<f:selectItem
										itemLabel="#{msg['page.segundaViaComprovantes.segvia.combobox.selecione']}"
										itemValue="" noSelectionOption="true" />

									<f:selectItems
										value="#{segundaViaComprovanteConsultarBBean.listaTributos}" />
								</h:selectOneMenu>
							</p:outputPanel>
						</p:outputPanel>
					</p:outputPanel>

                    <p:outputPanel styleClass="row">
                        <p:outputPanel styleClass="col-md-12">
							<h:outputText value="#{msg['page.segundaViaComprovantes.segvia.label.disponibilidade']} " />  
							<h:outputText value="#{segundaViaComprovanteConsultarBBean.strDisponibilidade}" styleClass="bold"/>							
						</p:outputPanel>
					</p:outputPanel>
					
					 <p:outputPanel styleClass="row space-b">
					 	<p:outputPanel styleClass="col-md-12">
							<p:separator />
						</p:outputPanel>
					</p:outputPanel>	
					
					<p:outputPanel styleClass="row" id="div-periodo-especifico">
						<p:outputPanel styleClass="col-md-12">							
							<p>	#{msg['page.segundaViaComprovantes.segvia.title.periodo']} 
								#{msg['page.segundaViaComprovantes.segvia.help.1']} 
								#{msg['page.segundaViaComprovantes.segvia.help.link']} 
								#{msg['page.segundaViaComprovantes.segvia.help.2']}
							</p>	
							<br />			
						</p:outputPanel>
					
						<p:outputPanel styleClass="col-md-2">
							<p:outputPanel styleClass="form-group">							 	
								<p><strong>#{msg['page.segundaViaComprovantes.segvia.title.combobox.periodo.especifico']}</strong></p>								
								<br />								
								<h:selectOneMenu id="periodoComboBox"
									value="#{segundaViaComprovanteConsultarBBean.periodoEspecificoSelecionado}">

									<p:ajax
										listener="#{segundaViaComprovanteConsultarBBean.resetOutroPeriodo}"
										update="painelPeriodo" />

									<f:selectItem
										itemLabel="#{msg['page.segundaViaComprovantes.segvia.combobox.selecione']}"
										itemValue="" noSelectionOption="true" />

									<f:selectItems itemLabel="#{periodo.nome}"
										itemValue="#{periodo.codigo}"
										value="#{segundaViaComprovanteConsultarBBean.listaPeriodosEspecificos}"
										var="periodo" />

								</h:selectOneMenu>								
							</p:outputPanel>
						</p:outputPanel>
					</p:outputPanel>
					
					 <p:outputPanel styleClass="row">
					 	<p:outputPanel styleClass="col-md-12">
							<p:separator />
						</p:outputPanel>
					</p:outputPanel>	
  										
                    <p:outputPanel styleClass="row space-b">
                        <p:outputPanel styleClass="col-md-12">                   
                            <p><strong>#{msg['page.segundaViaComprovantes.segvia.title.outro.periodo']}</strong></p>
                        </p:outputPanel>
                    </p:outputPanel>                    

					<p:outputPanel styleClass="row" id="painelPeriodo">
					
                        <p:outputPanel styleClass="col-md-2">   
							<p:outputPanel styleClass="row">
	                        	<p:outputPanel styleClass="col-md-12">
	
								<p:outputPanel styleClass="form-group">
								   <h:outputText  value="#{msg['page.segundaViaComprovantes.segvia.placeholder.data.inicial']}" />
								   <p:outputPanel styleClass="icon-data-input">
								      	<i class="fa fa-calendar"></i>						      								      	
								      	<p:calendar id="dataInicial" 
								      				showOtherMonths="true" 
								      				pattern="dd/MM/yyyy" 
								      				value="#{segundaViaComprovanteConsultarBBean.dataInicial}"  
								      				maxlength="10"
								      				converter="dateConverterFormat"   
													onkeyup="bloqueioCTRLV(this, event); mascaraData(this, event)" 
													onkeypress="mascaraData(this, event)">										
											<p:ajax event="dateSelect"
													listener="#{segundaViaComprovanteConsultarBBean.resetPeriodoEspecifico}"
													update="div-periodo-especifico" />	
													
											<p:ajax event="change" 
													process="@this" 
													update="dataInicial"/>																					
											</p:calendar>	
									   </p:outputPanel>
								</p:outputPanel>
                            
                            </p:outputPanel>
                          </p:outputPanel>
                        </p:outputPanel>
                            
                         <p:outputPanel styleClass="col-md-2">   
							<p:outputPanel styleClass="row">
	                        	<p:outputPanel styleClass="col-md-12">
	                        	
                            <p:outputPanel styleClass="form-group">
                                <h:outputText  value="#{msg['page.segundaViaComprovantes.segvia.placeholder.data.final']}" />
   	                            <p:outputPanel styleClass="icon-data-input">
	                                <i class="fa fa-calendar"></i>															
									<p:calendar id="dataFinal" 
												showOtherMonths="true"									
												pattern="dd/MM/yyyy" 
												value="#{segundaViaComprovanteConsultarBBean.dataFinal}"
												maxlength="10"
												converter="dateConverterFormat" 
												onkeyup="bloqueioCTRLV(this, event); mascaraData(this, event);"
												onkeypress="mascaraData(this, event)">
										<p:ajax event="dateSelect"
												listener="#{segundaViaComprovanteConsultarBBean.resetPeriodoEspecifico}"
												update="div-periodo-especifico" />
												
										<p:ajax event="change" 
												process="@this" 
												update="dataFinal"/>
									</p:calendar>
								</p:outputPanel>
							</p:outputPanel>                            

                            </p:outputPanel>
                          </p:outputPanel>
                        </p:outputPanel>
                        
					</p:outputPanel>  
					
					<p:outputPanel styleClass="tabela-cartoes" >
				
						<p:outputPanel styleClass="row space-b" rendered="#{segundaViaComprovanteConsultarBBean.renderTabelaCartoes}">
							<p:outputPanel styleClass="col-md-12">
	                    		<p:separator />
	                    	</p:outputPanel>
						</p:outputPanel>
						
						<p:outputPanel styleClass="row space-b" rendered="#{segundaViaComprovanteConsultarBBean.renderTabelaCartoes}">
	                        <p:outputPanel styleClass="col-md-12">
								<p:outputLabel value="#{msg['page.segundaViaComprovantes.segvia.tabela.cartoes.facet']}" styleClass="bold"/>
							</p:outputPanel>
						</p:outputPanel>
					
						<p:dataTable 
							var="cartao"
							rowKey="#{cartao.numero}"
							rendered="#{segundaViaComprovanteConsultarBBean.renderTabelaCartoes}"
							tableStyleClass="tacle-custom table-zebrada"
							styleClass="data-table-header-custom"
							value="#{segundaViaComprovanteConsultarBBean.listaTabelaCartoes}"
							selection="#{segundaViaComprovanteConsultarBBean.cartaoDto}"
							emptyMessage="#{msg['page.segunda.via.comprovantes.cartaocredito.tabela.vazia.msg']}">
							
							<p:ajax event="rowSelectRadio"
											listener="#{segundaViaComprovanteConsultarBBean.onRowSelect}" />
							
							<p:column selectionMode="single" width="50"/>
							
							<p:column 
								headerText="#{msg['page.segundaViaComprovantes.segvia.tabela.cartoes.header.tipo']}"
								styleClass="col-md-4 text-left">
								<div class="text-left">
								<p:graphicImage value="#{cartao.img}"  />
								<h:outputLabel value="#{cartao.tipo}" styleClass="space-l"/>
								</div>
							</p:column>

							<p:column
								headerText="#{msg['page.segundaViaComprovantes.segvia.tabela.cartoes.header.numero']}"
								styleClass="col-md-4 text-left">
								<h:outputText value="#{cartao.numeroFormatado}"/>
							</p:column>

							<p:column
								headerText="#{msg['page.segundaViaComprovantes.segvia.tabela.cartoes.header.nome']}"
								styleClass="col-md-4 text-left">
								<h:outputText value="#{cartao.nomeTitular}" styleClass="text-left" />
							</p:column>

						</p:dataTable>

					</p:outputPanel>                                     

                </p:outputPanel>
            </p:outputPanel>
        </p:outputPanel>      
					
		<p:outputPanel styleClass="row space-b">
			<p:outputPanel styleClass="col-md-12 text-right">					
               	<p:commandLink styleClass="btn btn-default btn-cinza" 
               	 			   action="#{segundaViaComprovanteConsultarBBean.voltar}" 
               				   role="button">#{msg['page.btn.voltar']}
                </p:commandLink>

                <p:commandLink styleClass="btn btn-default" 
               	 			   action="#{segundaViaComprovanteConsultarBBean.continuarConsulta}"
               				   ajax="true" 
               				   role="button">#{msg['page.btn.continuar']}
				</p:commandLink>
			</p:outputPanel>
		</p:outputPanel>
		
	</ui:define>

</ui:composition>